---
import ButtonClear from "@components/ButtonClear.astro";
import ButtonFilter from "@components/ButtonFilter.astro";
import FilterIcon from "@assets/filter-icon.svg";
import ArrowDownIcon from "@assets/arrow-down.svg";
import { species } from "@utils/getSpecies";
const speciesOptions = await species();
---

<article class="w-full max-w-3xl mx-auto p-4">
  <div class="">
    <h2 class="text-xl font-bold mb-4 text-white flex items-center gap-2">
      <FilterIcon class="w-5 h-5 text-primary" />
      Filtros
    </h2>

    <div class="grid grid-cols-2 gap-6 items-start">
      <!-- Filtro por Estado -->
      <div class="flex flex-wrap gap-3">
        <span class="text-white font-semibold text-sm uppercase tracking-wide"
          >Estado</span
        >
        <div class="flex items-center flex-wrap gap-2">
          <ButtonFilter
            text="Todos"
            value="all"
            filter="status"
            classList="border-primary/20 hover:border-primary"
          />
          <ButtonFilter
            text="Vivo"
            value="alive"
            filter="status"
            classList="border-status-alive/20 hover:border-status-alive"
            indicator={true}
            indicatorColor="bg-status-alive"
          />
          <ButtonFilter
            text="Muerto"
            value="dead"
            filter="status"
            classList="border-status-dead/20 hover:border-status-dead"
            indicator={true}
            indicatorColor="bg-status-dead"
          />
          <ButtonFilter
            text="Desconocido"
            value="unknown"
            filter="status"
            classList="border-status-unknown/20 hover:border-status-unknown"
            indicator={true}
            indicatorColor="bg-status-unknown"
          />
        </div>
      </div>

      <!-- Filtro por Especie -->
      <div class="flex gap-3 flex-wrap justify-end">
        <span class="text-white font-semibold text-sm uppercase tracking-wide"
          >Especie</span
        >
        <div class="relative group">
          <select
            id="species-filter"
            class="select-custom px-3 py-2 pr-10 rounded-lg border-2 min-w-44 border-primary/20 text-white focus:outline-none focus:border-primary focus:shadow-md-primary hover:bg-bg-card/95 hover:border-primary/40 transition-all duration-200 appearance-none cursor-pointer text-sm"
            style="background-image: var(--gradient-select); box-shadow: var(--shadow-inset-select);"
          >
            <option
              value="all"
              class="bg-bg-card text-text-primary p-3 rounded-lg font-medium transition-all option-custom"
              >Todas las especies</option
            >
            {
              speciesOptions.map((specie) => (
                <option
                  value={specie.toLowerCase()}
                  class="bg-bg-card text-text-primary p-3 rounded-lg font-medium transition-all option-custom hover:bg-option-hover-bg"
                >
                  {" "}
                  {specie}{" "}
                </option>
              ))
            }
          </select>
          <ArrowDownIcon
            class="absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 transition-transform duration-200 text-primary pointer-events-none group-focus-within:rotate-180"
          />
        </div>
      </div>
    </div>

    <!-- BotÃ³n para limpiar filtros -->
    <div class="mt-4 flex justify-end">
      <ButtonClear id="clear-filters" text="Limpiar filtros" />
    </div>
  </div>
</article>

<style>
  select,
  ::picker(select) {
    appearance: base-select;
  }

  ::picker(select) {
    margin-top: 0.5rem;
    padding: 0.5rem;
    background-color: var(--color-bg-card);
    border-radius: 1rem;
    margin-bottom: 0.5rem;
  }
  ::picker-icon {
    display: none;
  }

  .option-custom:checked,
  .option-custom:focus {
    background-color: var(--color-option-selected-bg);
    color: var(--color-primary);
    font-weight: 600;
  }
</style>
